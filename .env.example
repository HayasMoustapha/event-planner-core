# ğŸ¯ Event Planner - Core Service Environment Configuration
#
# ğŸ“‹ GUIDE D'UTILISATION :
# 1. Copier ce fichier en .env.local pour le dÃ©veloppement
# 2. Copier ce fichier en .env pour la production
# 3. Remplacer les valeurs par dÃ©faut par vos vraies clÃ©s
# 4. NE JAMAIS COMMITTER le fichier .env contenant des secrets !

# ===========================================
# ğŸš€ SERVEUR & ENVIRONNEMENT
# ===========================================
PORT=3001
# ğŸ¯ Port d'Ã©coute du service (doit Ãªtre unique par service)
NODE_ENV=development
# ğŸŒ Environnement : development | staging | production

# ===========================================
# ğŸ—„ï¸ BASE DE DONNÃ‰ES POSTGRESQL
# ===========================================
DB_HOST=localhost
# ğŸ  HÃ´te de la base de donnÃ©es (localhost en dev, RDS endpoint en prod)
DB_PORT=5432
# ğŸšª Port PostgreSQL (5432 par dÃ©faut)
DB_NAME=event_planner_core
# ğŸ“Š Nom de la base de donnÃ©es (prÃ©fixe event_planner_ recommandÃ©)
DB_USER=postgres
# ğŸ‘¤ Utilisateur PostgreSQL (crÃ©er un utilisateur dÃ©diÃ© en prod)
DB_PASSWORD=postgres
# ğŸ” Mot de passe PostgreSQL (utiliser un mot de passe fort en prod)
DB_SSL=false
# ğŸ”’ Connexion SSL (true en production avec RDS)

# Pool de connexions pour optimiser les performances
DB_POOL_MIN=2
# ğŸ”¢ Nombre minimum de connexions dans le pool
DB_POOL_MAX=10
# ğŸ”¢ Nombre maximum de connexions dans le pool
DB_POOL_IDLE_TIMEOUT=30000
# â° Timeout d'inactivitÃ© des connexions (ms)

# Bootstrap automatique de la base de donnÃ©es
DB_AUTO_BOOTSTRAP=false
# âš ï¸ DÃ‰SACTIVÃ‰ PAR DÃ‰FAUT EN PRODUCTION POUR SÃ‰CURITÃ‰
# âœ… true : CrÃ©e automatiquement les tables et index au dÃ©marrage
# âŒ false : NÃ©cessite une migration manuelle en production

# ===========================================
# ğŸ” AUTHENTIFICATION UNIFIÃ‰E
# ===========================================
# âš ï¸ IMPORTANT: Utiliser le mÃªme secret que l'auth service
# ğŸ”‘ GÃ©nÃ©rer une clÃ© sÃ©curisÃ©e : openssl rand -base64 32
JWT_SECRET=your_super_secure_256_bit_secret_key_change_in_production
# ğŸ” ClÃ© secrÃ¨te pour vÃ©rifier les tokens JWT (doit Ãªtre identique Ã  l'Auth Service)

# Configuration JWT avancÃ©e
JWT_ALGORITHM=HS256
# ğŸ› ï¸ Algorithme de signature (doit Ãªtre identique Ã  l'Auth Service)
JWT_ISSUER=auth-service
# ğŸ¢ Ã‰metteur attendu des tokens JWT (doit Ãªtre identique Ã  l'Auth Service)
JWT_AUDIENCE=event-planner
# ğŸ‘¥ Audience du token (doit Ãªtre identique Ã  l'Auth Service)

# Configuration validation JWT
JWT_VERIFY_ISSUER=true
# âœ… VÃ©rifier l'Ã©metteur du token (sÃ©curitÃ©)
JWT_VERIFY_AUDIENCE=true
# âœ… VÃ©rifier l'audience du token (sÃ©curitÃ©)
JWT_VERIFY_EXPIRATION=true
# âœ… VÃ©rifier l'expiration du token (sÃ©curitÃ©)
JWT_MAX_AGE=7d
# ğŸ“… Ã‚ge maximum du token acceptÃ©
JWT_CLOCK_TOLERANCE=0
# â° TolÃ©rance de temps (pour les dÃ©calages d'horloge)

# ===========================================
# ğŸŒ INTER-SERVICES COMMUNICATION
# ===========================================
# Token partagÃ© pour communication entre services
# ğŸ”‘ GÃ©nÃ©rer : openssl rand -base64 32 (doit Ãªtre identique partout)
SHARED_SERVICE_TOKEN=shared-service-token-abcdef12345678901234567890
# ğŸ” Token pour authentifier les communications inter-services

# URLs des autres services (pour health checks et communication)
AUTH_SERVICE_URL=http://localhost:3000
# ğŸ” URL du service d'authentification
NOTIFICATION_SERVICE_URL=http://localhost:3002
# ğŸ“§ URL du service de notifications
PAYMENT_SERVICE_URL=http://localhost:3003
# ğŸ’³ URL du service de paiements
TICKET_GENERATOR_SERVICE_URL=http://localhost:3004
# ğŸ« URL du service de gÃ©nÃ©ration de tickets
SCAN_VALIDATION_SERVICE_URL=http://localhost:3005
# ğŸ” URL du service de validation

# Timeout pour les appels HTTP inter-services
INTER_SERVICE_TIMEOUT=30000
# â° Timeout par dÃ©faut (30000ms = 30 secondes)
INTER_SERVICE_RETRY_ATTEMPTS=3
# ğŸ”¢ Nombre de tentatives de retry
INTER_SERVICE_RETRY_DELAY=1000
# â° DÃ©lai entre les retries (1000ms = 1 seconde)

# ===========================================
# ğŸ’¾ CACHE REDIS
# ===========================================
REDIS_HOST=localhost
# ğŸ  HÃ´te Redis (localhost en dev, ElastiCache endpoint en prod)
REDIS_PORT=6379
# ğŸšª Port Redis (6379 par dÃ©faut)
REDIS_PASSWORD=your_redis_password
# ğŸ” Mot de passe Redis (recommandÃ© en production)
REDIS_DB=1
# ğŸ“Š NumÃ©ro de la base Redis (1 pour Core Service)

# Configuration du cache
CACHE_TTL=3600
# â° DurÃ©e de vie du cache en secondes (3600 = 1 heure)
CACHE_MAX_KEYS=10000
# ğŸ”¢ Nombre maximum de clÃ©s en cache

# ===========================================
# ï¿½ FILES D'ATTENTE REDIS (Bull Queue)
# ===========================================
REDIS_QUEUE_HOST=localhost
# ğŸ  HÃ´te Redis pour les queues (peut Ãªtre le mÃªme que le cache)
REDIS_QUEUE_PORT=6379
# ğŸšª Port Redis pour les queues
REDIS_QUEUE_PASSWORD=your_redis_password
# ğŸ” Mot de passe Redis pour les queues
REDIS_QUEUE_DB=2
# ğŸ“Š NumÃ©ro de la base Redis pour les queues (diffÃ©rent du cache)

# Configuration des queues
QUEUE_DEFAULT_JOB_OPTIONS_RETRY_ATTEMPTS=3
# ğŸ”¢ Nombre de tentatives de retry par dÃ©faut
QUEUE_DEFAULT_JOB_OPTIONS_BACKOFF=exponential
# ğŸ”„ StratÃ©gie de retry : fixed | exponential
QUEUE_CONCURRENCY=5
# ğŸ”¢ Nombre de jobs traitÃ©s en parallÃ¨le

# ===========================================
# ï¿½ğŸ“ FILE UPLOAD & STORAGE
# ===========================================
UPLOAD_PATH=./uploads
# ğŸ“ Chemin pour les fichiers uploadÃ©s (doit exister)
MAX_FILE_SIZE=10MB
# ğŸ“ Taille maximale des fichiers (10MB recommandÃ©)
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx
# ğŸ“„ Types de fichiers autorisÃ©s (sÃ©parer par des virgules)

# SÃ©curitÃ© des uploads
ENABLE_VIRUS_SCAN=false
# ğŸ¦  Activer le scan antivirus (nÃ©cessite un service externe)
ENABLE_FILE_VALIDATION=true
# âœ… Activer la validation stricte des fichiers

# ===========================================
# ğŸ“ LOGGING
# ===========================================
LOG_LEVEL=info
# ğŸ“Š Niveau de log : error | warn | info | debug
LOG_FILE_PATH=logs
# ğŸ“ Chemin des fichiers de log
LOG_MAX_SIZE=20MB
# ğŸ“ Taille maximale d'un fichier de log
LOG_MAX_FILES=14d
# ğŸ“… DurÃ©e de rÃ©tention des logs (14 jours recommandÃ©)

# Activer les logs structurÃ©s
ENABLE_STRUCTURED_LOGS=true
# ğŸ“Š Activer les logs au format JSON
ENABLE_REQUEST_LOGGING=true
# ğŸ“ Activer les logs des requÃªtes HTTP
ENABLE_DB_QUERY_LOGGING=false
# ğŸ—„ï¸ Activer les logs des requÃªtes BDD (uniquement en dev)

# ===========================================
# ğŸ“Š MONITORING
# ===========================================
ENABLE_METRICS=true
# ğŸ“ˆ Activer les mÃ©triques Prometheus
METRICS_PORT=9091
# ğŸšª Port pour les mÃ©triques (doit Ãªtre unique)
ENABLE_HEALTH_CHECKS=true
# âœ… Activer les health checks dÃ©taillÃ©s
ENABLE_PERFORMANCE_MONITORING=true
# ğŸ“ˆ Activer le monitoring des performances

# ===========================================
# ğŸš¦ RATE LIMITING
# ===========================================
RATE_LIMIT_WINDOW_MS=900000
# â° FenÃªtre de temps pour le rate limiting (900000ms = 15 minutes)
RATE_LIMIT_MAX_REQUESTS=1000
# ğŸ”¢ Nombre max de requÃªtes par fenÃªtre (global)
API_RATE_LIMIT_MAX_REQUESTS=100
# ğŸ”¢ Nombre max de requÃªtes API par fenÃªtre
BATCH_RATE_LIMIT_MAX_REQUESTS=10
# ğŸ”¢ Nombre max de requÃªtes batch par fenÃªtre

# Rate limiting spÃ©cifique par endpoint
EVENTS_RATE_LIMIT_MAX=50
# ğŸª Limite pour les endpoints Ã©vÃ©nements
GUESTS_RATE_LIMIT_MAX=100
# ğŸ‘¥ Limite pour les endpoints invitÃ©s
TICKETS_RATE_LIMIT_MAX=200
# ğŸ« Limite pour les endpoints tickets

# ===========================================
# ğŸ›¡ï¸ SÃ‰CURITÃ‰
# ===========================================
CORS_ORIGIN=http://localhost:3000,http://localhost:3001,http://localhost:3002
# ğŸŒ Origines autorisÃ©es pour CORS (sÃ©parer par des virgules)
ENABLE_IP_WHITELIST=false
# âœ… Activer le whitelist d'IPs
ALLOWED_IPS=127.0.0.1,::1
# ğŸŒ Adresses IP autorisÃ©es (sÃ©parer par des virgules)
ENABLE_REQUEST_VALIDATION=true
# âœ… Activer la validation stricte des requÃªtes

# ===========================================
# ğŸª Ã‰VÃ‰NEMENTS CONFIGURATION
# ===========================================
MAX_EVENTS_PER_ORGANIZER=100
# ğŸ”¢ Nombre maximum d'Ã©vÃ©nements par organisateur
MAX_PARTICIPANTS_PER_EVENT=10000
# ğŸ‘¥ Nombre maximum de participants par Ã©vÃ©nement
DEFAULT_EVENT_DURATION_HOURS=8
# â° DurÃ©e par dÃ©faut d'un Ã©vÃ©nement (heures)
MIN_EVENT_DURATION_MINUTES=30
# â±ï¸ DurÃ©e minimale d'un Ã©vÃ©nement (minutes)
MAX_EVENT_DURATION_HOURS=72
# â° DurÃ©e maximale d'un Ã©vÃ©nement (heures)

# Configuration des types d'Ã©vÃ©nements
ENABLE_RECURRING_EVENTS=true
# ğŸ”„ Activer les Ã©vÃ©nements rÃ©currents
MAX_RECURRING_OCCURRENCES=52
# ğŸ”„ Nombre maximum d'occurrences rÃ©currentes
DEFAULT_REMINDER_HOURS_BEFORE=24
# â° Heures avant l'Ã©vÃ©nement pour le rappel par dÃ©faut

# ===========================================
# ğŸ“§ NOTIFICATIONS SETTINGS
# ===========================================
ENABLE_EMAIL_NOTIFICATIONS=true
# âœ… Activer les notifications par email
ENABLE_SMS_NOTIFICATIONS=true
# âœ… Activer les notifications par SMS
ENABLE_PUSH_NOTIFICATIONS=false
# ğŸ“± Activer les notifications push (future)
NOTIFICATION_RETRY_ATTEMPTS=3
# ğŸ”¢ Nombre de tentatives de retry pour les notifications
NOTIFICATION_RETRY_DELAY=5000
# â° DÃ©lai entre les retries (5000ms = 5 secondes)

# Templates par dÃ©faut
DEFAULT_EVENT_CREATED_TEMPLATE=event-created
# ğŸ“§ Template pour crÃ©ation d'Ã©vÃ©nement
DEFAULT_GUEST_REGISTERED_TEMPLATE=guest-registered
# ğŸ“§ Template pour inscription d'invitÃ©
DEFAULT_PAYMENT_CONFIRMED_TEMPLATE=payment-confirmed
# ğŸ“§ Template pour confirmation de paiement
DEFAULT_EVENT_REMINDER_TEMPLATE=event-reminder
# ğŸ“§ Template pour rappel d'Ã©vÃ©nement

# ===========================================
# ğŸ« BILLETS CONFIGURATION
# ===========================================
TICKET_NUMBER_LENGTH=8
# ğŸ”¢ Longueur du numÃ©ro de ticket
TICKET_PREFIX=EVT
# ğŸ« PrÃ©fixe pour les numÃ©ros de tickets
QR_CODE_EXPIRY_HOURS=24
# â° DurÃ©e de validitÃ© du QR code (heures)
ENABLE_TICKET_TRANSFER=true
# ğŸ”„ Activer le transfert de tickets
MAX_TICKET_TRANSFERS=3
# ğŸ”¢ Nombre maximum de transferts par ticket

# Configuration des types de tickets
DEFAULT_TICKET_TYPES=standard,vip,premium
# ğŸ« Types de tickets par dÃ©faut
MAX_TICKET_TYPES_PER_EVENT=10
# ğŸ”¢ Nombre maximum de types de tickets par Ã©vÃ©nement

# ===========================================
# ğŸ’³ PAIEMENTS CONFIGURATION
# ===========================================
ENABLE_PAYMENT_PROCESSING=true
# âœ… Activer le traitement des paiements
DEFAULT_CURRENCY=EUR
# ğŸ’± Devise par dÃ©faut
PAYMENT_TIMEOUT=1800000
# â° Timeout pour les paiements (1800000ms = 30 minutes)
MIN_PAYMENT_AMOUNT=1.00
# ğŸ’° Montant minimum de paiement
MAX_PAYMENT_AMOUNT=100000.00
# ğŸ’° Montant maximum de paiement

# Configuration des remboursements
ENABLE_REFUNDS=true
# âœ… Activer les remboursements
REFUND_TIMEOUT=86400000
# â° Timeout pour les remboursements (86400000ms = 24 heures)
AUTO_REFUND_ENABLED=false
# ğŸ”„ Activer les remboursements automatiques

# ===========================================
# ğŸ“Š STATISTICS & ANALYTICS
# ===========================================
ENABLE_REAL_TIME_STATS=true
# ğŸ“ˆ Activer les statistiques en temps rÃ©el
STATS_AGGREGATION_INTERVAL=300000
# â° Intervalle d'agrÃ©gation des statistiques (300000ms = 5 minutes)
STATS_RETENTION_DAYS=90
# ğŸ“… DurÃ©e de rÃ©tention des statistiques (jours)
ENABLE_EXPORT_STATS=true
# ğŸ“Š Activer l'export des statistiques

# ===========================================
# ğŸ”” WEBHOOKS
# ===========================================
ENABLE_WEBHOOKS=true
# âœ… Activer les webhooks
WEBHOOK_TIMEOUT=10000
# â° Timeout pour les webhooks (10000ms = 10 secondes)
WEBHOOK_RETRY_ATTEMPTS=3
# ğŸ”¢ Nombre de tentatives de retry pour les webhooks
WEBHOOK_RETRY_DELAY=2000
# â° DÃ©lai entre les retries (2000ms = 2 secondes)

# ===========================================
# ğŸŒ INTERNATIONALISATION
# ===========================================
DEFAULT_LANGUAGE=fr
# ğŸŒ Langue par dÃ©faut
SUPPORTED_LANGUAGES=fr,en,es,de,it
# ğŸŒ Langues supportÃ©es (sÃ©parer par des virgules)
ENABLE_AUTO_TRANSLATION=false
# ğŸŒ Activer la traduction automatique

# ===========================================
# ğŸ§ª TESTS & DÃ‰VELOPPEMENT
# ===========================================
ENABLE_MOCK_SERVICES=false
# ğŸ§ª Activer les services mockÃ©s pour les tests
ENABLE_DEBUG_MODE=false
# ğŸ› Activer le mode debug (informations supplÃ©mentaires)
ENABLE_PERFORMANCE_MONITORING=false
# ğŸ“ˆ Activer le monitoring des performances (uniquement en dev)
